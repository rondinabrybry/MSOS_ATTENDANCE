document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("openQRButton"),r=document.getElementById("openQRLogout");a&&a.addEventListener("click",function(){fetch(a.getAttribute("data-route"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a.getAttribute("data-csrf")}}).then(e=>e.json()).then(e=>{e.url&&window.open(e.url,"_blank")})}),r&&r.addEventListener("click",function(){fetch(r.getAttribute("data-route"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":r.getAttribute("data-csrf")}}).then(e=>e.json()).then(e=>{e.url&&window.open(e.url,"_blank")})});const m=document.getElementById("fileInput"),g=document.getElementById("errorMessage"),p=document.getElementById("csvTableContainer"),h=document.getElementById("csvTableHeader"),l=document.getElementById("csvTableBody"),y=document.getElementById("uploadButton"),E=document.getElementById("progressContainer"),b=document.getElementById("progressBar"),f=document.getElementById("completedModal"),v=document.getElementById("closeModalButton");m.addEventListener("change",e=>{const d=e.target.files[0];if(g.classList.add("hidden"),p.classList.add("hidden"),h.innerHTML="",l.innerHTML="",d&&d.type==="text/csv"){const t=new FileReader;t.onload=n=>{const c=n.target.result.split(`
`).map(s=>s.split(",")),B=c[0],i=document.createElement("tr");i.classList.add("text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"),B.forEach(s=>{const o=document.createElement("th");o.textContent=s.trim(),o.classList.add("px-6","py-3"),i.appendChild(o)}),h.appendChild(i),c.slice(1).forEach(s=>{const o=document.createElement("tr");o.classList.add("bg-white","border-b","dark:bg-gray-800","dark:border-gray-700","hover:bg-gray-50","dark:hover:bg-gray-600"),s.forEach(L=>{const u=document.createElement("td");u.textContent=L.trim(),u.classList.add("px-6","py-4"),o.appendChild(u)}),l.appendChild(o)}),p.classList.remove("hidden")},t.readAsText(d)}else g.classList.remove("hidden"),m.value=""}),document.getElementById("csvForm").addEventListener("submit",function(e){y.disabled=!0,E.style.display="block";let d=0;const t=l.querySelectorAll("tr").length;let n=0;const c=setInterval(()=>{n=Math.min(n+Math.floor(Math.random()*5)+1,t),d=n/t*100,b.style.width=d+"%",b.textContent=`${n} / ${t}`,n>=t&&(clearInterval(c),setTimeout(()=>{E.style.display="none",y.disabled=!1,f.classList.remove("hidden")},5e3))},200)}),v.addEventListener("click",()=>{f.classList.add("hidden")})});
